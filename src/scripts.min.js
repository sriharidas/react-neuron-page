function generateSpotToken() {
  const date = new Date();
  const timezone = `GMT+${parseInt((date.getTimezoneOffset() / 60) * -1)}:${
    (date.getTimezoneOffset() / 60 - parseInt(date.getTimezoneOffset() / 60)) *
    60 *
    -1
  }`;

  const canvasContainer = document.createElement("CANVAS");
  canvasContainer.setAttribute("class", "canvas-container");
  canvasContainer.setAttribute(
    "style",
    " z-index: -1000;visibility: hidden;position: absolute;left: 50%;top: 50%;transform: translate(-50%, -50%);width: 300px;height: 300px;background-color: #ddd;border: 1px solid #000;"
  );
  const generateCodeContainer = document.createElement("DIV");
  generateCodeContainer.setAttribute("class", "generate-code");

  const generateCodeBtn = document.createElement("button");
  generateCodeBtn.setAttribute("class", "generate-code-btn");
  generateCodeBtn.append(document.createTextNode("Generate Code"));
  const codeContainer = document.createElement("CODE");
  codeContainer.setAttribute("class", "code");
  generateCodeContainer.append(generateCodeBtn);
  generateCodeContainer.append(codeContainer);
  document.querySelector("body").append(generateCodeContainer);
  // const canvasContainer = document.querySelector(".canvas-container");
  const canvas = canvasContainer.getContext("2d");
  const canvasWidth = canvasContainer.offsetTop;
  const canvasHeight = canvasContainer.offsetWidth;
  const canvasLeft = canvasContainer.offsetLeft;
  // lines
  canvas.moveTo(0, 0);
  canvas.lineTo(canvasLeft, canvasLeft + canvasWidth);
  canvas.fillStyle = "#f00";
  canvas.strokeStyle = "#f00";
  canvas.stroke();
  canvas.moveTo(100, 100);
  canvas.lineTo(canvasLeft, canvasWidth / 2);

  canvas.stroke();
  canvas.moveTo(100, 0);
  canvas.lineTo(canvasLeft, canvasWidth * 0.4);
  canvas.stroke();
  canvas.moveTo(0, 100);
  canvas.lineTo(canvasLeft * 10 + 100, canvasWidth * 10);
  canvas.stroke();

  // circle
  canvas.beginPath();
  canvas.arc(100, 50, 60, 40, 0, 2 * 3.14);
  canvas.stroke();
  // Text
  canvas.font = "20px arial";
  canvas.fillText("Welcome", 10, 50);

  canvas.strokeText(" TO Our Site !23!@#", 70, 80);
  const dataUrl = canvasContainer.toDataURL();

  // Hashing
  let hash = 0;
  for (var i = 0; i < dataUrl.length; i++) {
    let chr = dataUrl.charCodeAt(i);
    hash = (hash << 5) + chr;
    hash |= hash;
  }
  let hashCode = "";
  for (var j = 0; j < String(hash).length; j++) {
    hashCode += String.fromCharCode(97 + Number(String(hash)[j]));
  }

  document.querySelector("body").append(canvasContainer);
  // const generateCodeBtn = document.querySelector("#generate-code-btn");

  let browserData = {
    token: hashCode,
    currentWindow: {
      host: window.location.host,
      hostname: window.location.hostname,
      href: window.location.href,
      origin: window.location.origin,
      protocol: window.location.protocol,
      port: window.location.port,
      WindowName: window.name,
    },
    browser: {
      appCodeName: window.navigator.appCodeName,
      appName: window.navigator.appName,
      appVersion: window.navigator.appVersion,
    },
    userAgent: {
      userAgent: window.navigator.userAgent,
      userAgentData: {
        brand: window.navigator.userAgentData.brands,
        mobile: window.navigator.userAgentData.mobile,
        vendor: window.navigator.userAgentData.vendor,
      },
    },
    screen: {
      width: window.innerWidth,
      height: window.innerHeight,
      devicePixelRatio: window.devicePixelRatio,
      fullScreen: window.fullScreen,
    },
    geolocation: "",
    timezone: timezone,
    platform: window.navigator.platform,
    languages: window.navigator.languages,
    plugins: window.navigator.plugins,
  };

  window.navigator.geolocation.getCurrentPosition(
    (success) => {
      let geolocationCoords = success.coords;
      browserData.geolocation = {
        latitude: geolocationCoords.latitude,
        longitude: geolocationCoords.longitude,
      };

      return success;
    },
    (err) => err
  );

  let length = 5,
    code = "",
    min = 97,
    max = 122;

  for (var i = 0; i < length; i++) {
    let Codevalue = Math.floor(Math.random() * (max - min + 1)) + min;
    let CodeChar = String.fromCharCode(
      Math.floor(Math.random() * (max - min + 1)) + min
    );
    code += CodeChar;
  }
  document.querySelector(
    ".code"
  ).innerHTML = `<span> Generated Code is: <strong> ${code} </strong> </span>`;
  console.log(code);
  const url = "http://neurontech.herokuapp.com/api/script_request";
  const data = JSON.stringify({
    spot_token: code,
    ...browserData,
  });
  fetch(url, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Accept: "*/*",
    },
    body: data,
  })
    .then((response) => response.json()) // coverting reponse data to JSON Format
    .then((response) => {
      // response converted to JSON format
    })
    .catch((err) => alert(err));
  generateCodeBtn.addEventListener("click", this);
}
